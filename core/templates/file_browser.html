{% extends "base.html" %}
{% load static %}

{% block content %}
<h2>File Browser for {{ project.uploaded_file.name }}</h2>

{% if error %}
  <p style="color:red">{{ error }}</p>
{% endif %}

<style>
ul { list-style-type: none; }
li.folder > span { cursor: pointer; font-weight: bold; }
li ul { display: none; margin-left: 20px; }
</style>

<ul id="file-tree">
  {% for item in tree %}
    {% include "file_tree_item.html" with item=item %}
  {% endfor %}
</ul>

<script>
document.querySelectorAll('li.folder > span').forEach(el => {
    el.addEventListener('click', () => {
        const childUl = el.parentElement.querySelector('ul');
        if (childUl) childUl.style.display = childUl.style.display === 'none' ? 'block' : 'none';
    });
});
</script>

{% endblock %}
